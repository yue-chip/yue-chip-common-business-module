function R(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var D=Object.prototype.hasOwnProperty,h=function(){for(var n=[],a=0;a<256;++a)n.push("%"+((a<16?"0":"")+a.toString(16)).toUpperCase());return n}(),_=function(a){for(var e;a.length;){var r=a.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var i=[],t=0;t<e.length;++t)typeof e[t]<"u"&&i.push(e[t]);r.obj[r.prop]=i}}return e},T=function(a,e){for(var r=e&&e.plainObjects?Object.create(null):{},i=0;i<a.length;++i)typeof a[i]<"u"&&(r[i]=a[i]);return r},B=function n(a,e,r){if(!e)return a;if(typeof e!="object"){if(Array.isArray(a))a.push(e);else if(a&&typeof a=="object")(r&&(r.plainObjects||r.allowPrototypes)||!D.call(Object.prototype,e))&&(a[e]=!0);else return[a,e];return a}if(!a||typeof a!="object")return[a].concat(e);var i=a;return Array.isArray(a)&&!Array.isArray(e)&&(i=T(a,r)),Array.isArray(a)&&Array.isArray(e)?(e.forEach(function(t,l){if(D.call(a,l)){var o=a[l];o&&typeof o=="object"&&t&&typeof t=="object"?a[l]=n(o,t,r):a.push(t)}else a[l]=t}),a):Object.keys(e).reduce(function(t,l){var o=e[l];return D.call(t,l)?t[l]=n(t[l],o,r):t[l]=o,t},i)},z=function(a,e){return Object.keys(e).reduce(function(r,i){return r[i]=e[i],r},a)},V=function(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return n}},I=function(a){if(a.length===0)return a;for(var e=typeof a=="string"?a:String(a),r="",i=0;i<e.length;++i){var t=e.charCodeAt(i);if(t===45||t===46||t===95||t===126||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122){r+=e.charAt(i);continue}if(t<128){r=r+h[t];continue}if(t<2048){r=r+(h[192|t>>6]+h[128|t&63]);continue}if(t<55296||t>=57344){r=r+(h[224|t>>12]+h[128|t>>6&63]+h[128|t&63]);continue}i+=1,t=65536+((t&1023)<<10|e.charCodeAt(i)&1023),r+=h[240|t>>18]+h[128|t>>12&63]+h[128|t>>6&63]+h[128|t&63]}return r},U=function(a){for(var e=[{obj:{o:a},prop:"o"}],r=[],i=0;i<e.length;++i)for(var t=e[i],l=t.obj[t.prop],o=Object.keys(l),f=0;f<o.length;++f){var s=o[f],c=l[s];typeof c=="object"&&c!==null&&r.indexOf(c)===-1&&(e.push({obj:l,prop:s}),r.push(c))}return _(e)},K=function(a){return Object.prototype.toString.call(a)==="[object RegExp]"},q=function(a){return a===null||typeof a>"u"?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))},H={arrayToObject:T,assign:z,compact:U,decode:V,encode:I,isBuffer:q,isRegExp:K,merge:B},G=String.prototype.replace,M=/%20/g,$={default:"RFC3986",formatters:{RFC1738:function(n){return G.call(n,M,"+")},RFC3986:function(n){return String(n)}},RFC1738:"RFC1738",RFC3986:"RFC3986"},N=H,P=$,L={brackets:function(a){return a+"[]"},indices:function(a,e){return a+"["+e+"]"},repeat:function(a){return a}},A=Array.isArray,J=Array.prototype.push,S=function(n,a){J.apply(n,A(a)?a:[a])},W=Date.prototype.toISOString,m={delimiter:"&",encode:!0,encoder:N.encode,encodeValuesOnly:!1,serializeDate:function(a){return W.call(a)},skipNulls:!1,strictNullHandling:!1},X=function n(a,e,r,i,t,l,o,f,s,c,p,v){var u=a;if(typeof o=="function"?u=o(e,u):u instanceof Date&&(u=c(u)),u===null){if(i)return l&&!v?l(e,m.encoder):e;u=""}if(typeof u=="string"||typeof u=="number"||typeof u=="boolean"||N.isBuffer(u)){if(l){var g=v?e:l(e,m.encoder);return[p(g)+"="+p(l(u,m.encoder))]}return[p(e)+"="+p(String(u))]}var y=[];if(typeof u>"u")return y;var O;if(A(o))O=o;else{var j=Object.keys(u);O=f?j.sort(f):j}for(var x=0;x<O.length;++x){var b=O[x];t&&u[b]===null||(A(u)?S(y,n(u[b],r(e,b),r,i,t,l,o,f,s,c,p,v)):S(y,n(u[b],e+(s?"."+b:"["+b+"]"),r,i,t,l,o,f,s,c,p,v)))}return y},Y=function(n,a){var e=n,r=a?N.assign({},a):{};if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=typeof r.delimiter>"u"?m.delimiter:r.delimiter,t=typeof r.strictNullHandling=="boolean"?r.strictNullHandling:m.strictNullHandling,l=typeof r.skipNulls=="boolean"?r.skipNulls:m.skipNulls,o=typeof r.encode=="boolean"?r.encode:m.encode,f=typeof r.encoder=="function"?r.encoder:m.encoder,s=typeof r.sort=="function"?r.sort:null,c=typeof r.allowDots>"u"?!1:r.allowDots,p=typeof r.serializeDate=="function"?r.serializeDate:m.serializeDate,v=typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:m.encodeValuesOnly;if(typeof r.format>"u")r.format=P.default;else if(!Object.prototype.hasOwnProperty.call(P.formatters,r.format))throw new TypeError("Unknown format option provided.");var u=P.formatters[r.format],g,y;typeof r.filter=="function"?(y=r.filter,e=y("",e)):A(r.filter)&&(y=r.filter,g=y);var O=[];if(typeof e!="object"||e===null)return"";var j;r.arrayFormat in L?j=r.arrayFormat:"indices"in r?j=r.indices?"indices":"repeat":j="indices";var x=L[j];g||(g=Object.keys(e)),s&&g.sort(s);for(var b=0;b<g.length;++b){var F=g[b];l&&e[F]===null||S(O,X(e[F],F,x,t,l,o?f:null,y,s,c,p,u,v))}var C=O.join(i),Q=r.addQueryPrefix===!0?"?":"";return C.length>0?Q+C:""},w=H,E=Object.prototype.hasOwnProperty,d={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:w.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Z=function(a,e){for(var r={},i=e.ignoreQueryPrefix?a.replace(/^\?/,""):a,t=e.parameterLimit===1/0?void 0:e.parameterLimit,l=i.split(e.delimiter,t),o=0;o<l.length;++o){var f=l[o],s=f.indexOf("]="),c=s===-1?f.indexOf("="):s+1,p,v;c===-1?(p=e.decoder(f,d.decoder),v=e.strictNullHandling?null:""):(p=e.decoder(f.slice(0,c),d.decoder),v=e.decoder(f.slice(c+1),d.decoder)),E.call(r,p)?r[p]=[].concat(r[p]).concat(v):r[p]=v}return r},k=function(n,a,e){for(var r=a,i=n.length-1;i>=0;--i){var t,l=n[i];if(l==="[]"&&e.parseArrays)t=[].concat(r);else{t=e.plainObjects?Object.create(null):{};var o=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,f=parseInt(o,10);!e.parseArrays&&o===""?t={0:r}:!isNaN(f)&&l!==o&&String(f)===o&&f>=0&&e.parseArrays&&f<=e.arrayLimit?(t=[],t[f]=r):o!=="__proto__"&&(t[o]=r)}r=t}return r},ee=function(a,e,r){if(a){var i=r.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a,t=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,o=t.exec(i),f=o?i.slice(0,o.index):i,s=[];if(f){if(!r.plainObjects&&E.call(Object.prototype,f)&&!r.allowPrototypes)return;s.push(f)}for(var c=0;(o=l.exec(i))!==null&&c<r.depth;){if(c+=1,!r.plainObjects&&E.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(o[1])}return o&&s.push("["+i.slice(o.index)+"]"),k(s,e,r)}},re=function(n,a){var e=a?w.assign({},a):{};if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=e.ignoreQueryPrefix===!0,e.delimiter=typeof e.delimiter=="string"||w.isRegExp(e.delimiter)?e.delimiter:d.delimiter,e.depth=typeof e.depth=="number"?e.depth:d.depth,e.arrayLimit=typeof e.arrayLimit=="number"?e.arrayLimit:d.arrayLimit,e.parseArrays=e.parseArrays!==!1,e.decoder=typeof e.decoder=="function"?e.decoder:d.decoder,e.allowDots=typeof e.allowDots=="boolean"?e.allowDots:d.allowDots,e.plainObjects=typeof e.plainObjects=="boolean"?e.plainObjects:d.plainObjects,e.allowPrototypes=typeof e.allowPrototypes=="boolean"?e.allowPrototypes:d.allowPrototypes,e.parameterLimit=typeof e.parameterLimit=="number"?e.parameterLimit:d.parameterLimit,e.strictNullHandling=typeof e.strictNullHandling=="boolean"?e.strictNullHandling:d.strictNullHandling,n===""||n===null||typeof n>"u")return e.plainObjects?Object.create(null):{};for(var r=typeof n=="string"?Z(n,e):n,i=e.plainObjects?Object.create(null):{},t=Object.keys(r),l=0;l<t.length;++l){var o=t[l],f=ee(o,r[o],e);i=w.merge(i,f,e)}return w.compact(i)},ae=Y,te=re,ne=$,ie={formats:ne,parse:te,stringify:ae};const le=R(ie);export{le as q};
