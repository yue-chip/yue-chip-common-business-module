import{i as R,j as g,k as V,l as F,h as e,w as a,n as K,o as m,u as l,p as _,c as k,b as y}from"./vue-router-ef9fc363.js";import{a as h,C as j,S as A,P as G,m as x,I as Y,b as H,c as J,d as Q,B as W,_ as X,F as Z}from"./axios-85071db1.js";import{q as ee}from"./index-5f427048.js";import{E as ae,M as ne,_ as te}from"./EditOutlined-007ce32e.js";import{D as O}from"./DeleteOutlined-ba572a4a.js";import{_ as le}from"./index-bed09c85.js";const me=R({__name:"index",setup(oe){const v=K();let C=g(!1),o=g({pageSize:10,pageNumber:1}),b=[];const U=[{title:"姓名",dataIndex:"name",fixed:"left",key:"name"},{title:"帐号",dataIndex:"username",key:"username"},{title:"电话",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"所属机构",dataIndex:"organizationalName",key:"organizationalName"},{title:"电子邮箱",dataIndex:"email",key:"email"},{title:"证件类型",dataIndex:["idCardType","desc"],key:"idCardType"},{title:"证书编号",dataIndex:"certificateNumber",key:"certificateNumber"},{title:"身份证号码",dataIndex:"identificationNumber",key:"identificationNumber"},{title:"接收短信通知",key:"isSms"},{title:"接收紧急呼叫",key:"isCall"},{title:"创建时间",dataIndex:"createDateTime",key:"createDateTime",width:"170px"},{title:"最后登录时间",dataIndex:"lastLoginTime",key:"lastLoginTime",width:"170px"},{title:"操作",key:"operation",fixed:"right",width:"155px"}];let N=g([]);const f=g({current:o.value.pageNumber?o.value.pageNumber:1,pageSize:o.value.pageSize?o.value.pageSize:30,onChange:(n,t)=>{o.value.pageSize=t,o.value.pageNumber=n,d()}});V(()=>{d()});const B={onChange:(n,t)=>{b=n},getCheckboxProps:n=>({disabled:n.username==="admin"})};function d(){C.value=!0,h.axiosGet("/upms/console/user/list",{params:o.value},n=>{N.value=n.data,f.value.total=n.totalElements,f.value.current=n.pageNumber,f.value.pageSize=n.pageSize,C.value=!1},null,null)}function D(){v.push("/addOrUpdate")}function P(n){v.push({path:"/addOrUpdate",query:{id:n}})}function S(n){if(!n||n.length===0){x.error("请选择要删除的数据！");return}ne.confirm({title:"是否要删除该数据?",okText:"Yes",okType:"danger",cancelText:"No",onOk(){const t={params:{ids:n},paramsSerializer:c=>ee.stringify(c,{indices:!1})};h.axiosDelete("/upms/console/user/delete",t,c=>{c.status===200&&(x.info(c.message),d())},null,null)},onCancel(){}})}function E(n){h.axiosPut("/upms/console/user/update",n,t=>{t.status===200&&(x.info(t.message),d())},null,null)}function q(n){h.axiosPut("/upms/console/user/update",n,t=>{t.status===200&&(x.info(t.message),d())},null,null)}return(n,t)=>{const c=Y,z=H,r=J,w=Q,p=W,I=X,L=Z,T=j,$=le,M=te;return m(),F("div",null,[e(T,null,{default:a(()=>[e(L,{ref:"from",model:l(o),"label-col":{span:4,offset:0}},{default:a(()=>[e(w,null,{default:a(()=>[e(r,{span:6},{default:a(()=>[e(z,{label:"姓名",name:"name",ref:"name"},{default:a(()=>[e(c,{placeholder:"请输入姓名",value:l(o).name,"onUpdate:value":t[0]||(t[0]=s=>l(o).name=s)},null,8,["value"])]),_:1},512)]),_:1}),e(r,{span:6}),e(r,{span:6}),e(r,{span:6})]),_:1}),e(w,{style:{height:"20px"}},{default:a(()=>[e(r,{span:24,style:{"text-align":"right"}},{default:a(()=>[e(z,null,{default:a(()=>[e(I,{size:5},{default:a(()=>[e(p,{type:"primary",onClick:t[1]||(t[1]=s=>{l(o).pageNumber=1,d()})},{icon:a(()=>[e(l(A))]),default:a(()=>[_(" 查询 ")]),_:1}),e(p,{type:"primary",onClick:t[2]||(t[2]=s=>D())},{icon:a(()=>[e(l(G))]),default:a(()=>[_(" 添加 ")]),_:1}),e(p,{type:"primary",danger:"",onClick:t[3]||(t[3]=s=>S(l(b)))},{icon:a(()=>[e(l(O))]),default:a(()=>[_(" 删除 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(T,null,{default:a(()=>[e(M,{rowKey:"id","row-selection":B,columns:U,"data-source":l(N),pagination:f.value,loading:l(C),scroll:{y:440}},{bodyCell:a(({column:s,text:ie,record:i})=>[s.key==="isSms"?(m(),k($,{key:0,onChange:u=>E(i),checked:i.isSms,"onUpdate:checked":u=>i.isSms=u,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked","onUpdate:checked"])):y("",!0),s.key==="isCall"?(m(),k($,{key:1,onChange:u=>q(i),checked:i.isCall,"onUpdate:checked":u=>i.isCall=u,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked","onUpdate:checked"])):y("",!0),s.key==="operation"?(m(),k(I,{key:2,size:5},{default:a(()=>[e(p,{size:"small",onClick:u=>P(i.id)},{icon:a(()=>[e(l(ae))]),default:a(()=>[_(" 修改 ")]),_:2},1032,["onClick"]),i.username!=="admin"?(m(),k(p,{key:0,size:"small",type:"primary",danger:"",onClick:u=>S(i.id)},{icon:a(()=>[e(l(O))]),default:a(()=>[_(" 删除 ")]),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)):y("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1})])}}});export{me as default};
